#:import LayeredImage modules.layered_image.LayeredImage

<FilterButton@PPCHoverPathToggleButton>:
    path: 'buttons/long_toggle'
    size_hint: 1, 1
    state: 'down'
    color: 0, 0, 0, 1
    font_size: '30sp'
    font_name: 'Gabriola'


<FilterPopup>:
    id: filter
#    auto_dismiss: False
    background: 'sort_background.png'
#    size_hint: app.get_dkey('fw s_h')
#    pos_hint: app.get_dkey('fw p_h')
#    border: app.get_dkey('fw b')
#    RelativeLayout:
#        PPCHoverPathButton:
#            id: back
#            path: 'buttons/back'
#            size_hint: app.get_dkey('fw.bb s_h')
#            pos_hint: app.get_dkey('fw.bb p_h')
    GridLayout:
        cols: 1
        rows: 8
        size_hint: 0.975 * 0.75, 0.975 * 0.9
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
#        size_hint: app.get_dkey("fw.ml s_h")
#        pos_hint: app.get_dkey("fw.ml p_h")
#        padding: 0.071, 0.0064 # app.get_dkey("fw.ml pad", root.width, root.height)
#        spacing: 0.0125
        Label:
            id: title
            text: 'Filter'
            size_hint: 1, 0.1868
            font_name: 'Precious'
            color: 0, 0, 0, 1
            font_size: '60sp'
#            color: app.get_dkey('fw.t c')
#            font_size: app.get_dkey('fw.t fs', root.height)
#            size_hint: app.get_dkey('fw.t s_h')
#            height: self.texture_size[1]
        RelativeLayout:
            id: space
            size_hint: 1, 0.093
            PPCHoverPathButton:
                id: apply_filter
                text: 'Apply Filter'
                path: 'buttons/long_stat'
                color: 0, 0, 0, 1
                font_name: 'Gabriola'
                size_hint: 0.2, 1
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
#                size_hint: app.get_dkey('fw.fb s_h')
    #            font_size: app.get_dkey('fw.fb fs', root.height)
#                pos_hint: app.get_dkey('fw.fb p_h', root.height)
        GridLayout:
            rows: 1
            cols: 3
            size_hint: 1, 0.0768
            Label:
                id: type_label
                text: 'By Type'
                font_name: 'Precious'
                color: app.get_dkey('fw.ot c')
                font_size: '30pt'
                size_hint: 0.275, 1
            Image:
                id: type_overlay_bar
                allow_stretch: True
                source: 'overlay_bar.png'
                size_hint: 0.475, 1
            Widget:
                size_hint: 0.275, 1
        GridLayout:
            id: layout_type
            cols: 5
            size_hint: 1, 0.093
            canvas.before:
                Color:
                    rgba: 0, 0, 1, 0.25
                Rectangle:
                    size: self.size
                    pos: self.pos
            FilterButton:
                id: magical
                text: 'Magical'
                on_release: root.modify_filtering(self.text)
            FilterButton:
                id: physical
                text: 'Physical'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: balanced
                text: 'Balanced'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: defensive
                text: 'Defensive'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: healing
                text: 'Healing'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
        GridLayout:
            cols: 3
            rows: 1
            size_hint: 1, 0.0768
            Label:
                id: element_label
                text: 'By Element'
                font_name: 'Precious'
                color: app.get_dkey('fw.ot c')
                font_size: '30pt'
                size_hint: 0.275, 1
#                size_hint: app.get_dkey('fw.ot s_h')
#                size: self.texture_size
#                font_size: app.get_dkey('fw.ot fs', root.height)
            Image:
                id: element_overlay_bar
                allow_stretch: True
                source: 'overlay_bar.png'
                size_hint: 0.475, 1
#                size_hint: app.get_dkey('fw.ob s_h')
            Widget:
                size_hint: 0.275, 1
        GridLayout:
            id: layout_element
            cols: 5
            rows: 2
            size_hint: 1, 0.1862
            FilterButton:
                id: light
                text: 'Light'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: dark
                text: 'Dark'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: earth
                text: 'Earth'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: wind
                text: 'Wind'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: thunder
                text: 'Thunder'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: fire
                text: 'Fire'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
            FilterButton:
                id: water
                text: 'Water'
                on_release: root.modify_filtering(self.text)
#                path: 'buttons/long_toggle'
#                toggle_enabled: True
#                toggle_state: True
#                font_size: app.get_dkey('fw.bu fs', root.height)
#                label_padding: app.get_dkey('fw.bu lp', self.height)
        GridLayout:
            cols: 3
            rows: 1
            size_hint: 1, 0.0768
            Label:
                id: rank_label
                text: 'By Rank'
                font_name: 'Precious'
                color: app.get_dkey('fw.ot c')
                size_hint: 0.275, 1
                font_size: '30pt'
#                size_hint: app.get_dkey('fw.ot s_h')
#                size: self.texture_size
#                font_size: app.get_dkey('fw.ot fs', root.height)
            Image:
                id: rank_overlay_bar
                allow_stretch: True
                source: 'overlay_bar.png'
                size_hint: 0.475, 1
#                size_hint: app.get_dkey('fw.ob s_h')
            Widget:
                size_hint: 0.275, 1
        GridLayout:
            id: rank_element
            cols: 5
            rows: 2
            size_hint: 1, 0.1862
            FilterButton:
                id: rank_1
                on_release: root.modify_filtering(1)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_1_stars
            FilterButton:
                id: rank_2
                on_release: root.modify_filtering(2)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_2_stars
            FilterButton:
                id: rank_3
                on_release: root.modify_filtering(3)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_3_stars
            FilterButton:
                id: rank_4
                on_release: root.modify_filtering(4)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_4_stars
            FilterButton:
                id: rank_5
                on_release: root.modify_filtering(5)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_5_stars
            FilterButton:
                id: rank_6
                on_release: root.modify_filtering(6)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_6_stars
            FilterButton:
                id: rank_7
                on_release: root.modify_filtering(7)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_7_stars
            FilterButton:
                id: rank_8
                on_release: root.modify_filtering(8)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_8_stars
            FilterButton:
                id: rank_9
                on_release: root.modify_filtering(9)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_9_stars
            FilterButton:
                id: rank_10
                on_release: root.modify_filtering(10)
                RelativeLayout:
                    size: self.parent.size
                    pos: self.parent.pos
                    LayeredImage:
                        id: rank_10_stars